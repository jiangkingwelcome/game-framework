<div class="mcp-app">
    <!-- é€‰é¡¹å¡å¯¼èˆª -->
    <div class="tab-navigation">
        <button class="tab-button" :class="{ active: activeTab === 'server' }" @click="switchTab('server')">
            <span>æœåŠ¡å™¨</span>
        </button>
        <button class="tab-button" :class="{ active: activeTab === 'tools' }" @click="switchTab('tools')">
            <span>å·¥å…·ç®¡ç†</span>
        </button>
        <button class="tab-button" :class="{ active: activeTab === 'config' }" @click="switchTab('config')">
            <span>ä¸€é”®é…ç½®</span>
        </button>
    </div>
    
    <!-- æœåŠ¡å™¨é€‰é¡¹å¡ -->
    <div class="tab-content" v-show="activeTab === 'server'">
        <section class="server-status">
            <h3>æœåŠ¡å™¨çŠ¶æ€</h3>
            <div class="status-info">
                <ui-prop>
                    <ui-label slot="label">çŠ¶æ€</ui-label>
                    <ui-label slot="content" class="status-value" :class="statusClass">{{ serverStatus }}</ui-label>
                </ui-prop>
                <ui-prop v-if="serverRunning">
                    <ui-label slot="label">è¿æ¥æ•°</ui-label>
                    <ui-label slot="content">{{ connectedClients }}</ui-label>
                </ui-prop>
            </div>
        </section>

        <section class="server-controls">
            <ui-button @click="toggleServer" :disabled="isProcessing" class="primary">
                {{ serverRunning ? 'åœæ­¢æœåŠ¡å™¨' : 'å¯åŠ¨æœåŠ¡å™¨' }}
            </ui-button>
        </section>

        <section class="server-settings">
            <h3>æœåŠ¡å™¨è®¾ç½®</h3>
            <ui-prop>
                <ui-label slot="label">ä¼ è¾“åè®®</ui-label>
                <ui-label slot="content" style="color: #007acc; font-weight: bold;">Streamable HTTP (MCP 2025-03-26)</ui-label>
            </ui-prop>
            <ui-prop>
                <ui-label slot="label">ç«¯å£</ui-label>
                <ui-num-input slot="content" v-model="settings.port" :min="1024" :max="65535" :step="1" :disabled="serverRunning">
                </ui-num-input>
            </ui-prop>
            <ui-prop>
                <ui-label slot="label">è‡ªåŠ¨å¯åŠ¨</ui-label>
                <ui-checkbox slot="content" v-model="settings.autoStart"></ui-checkbox>
            </ui-prop>
            <ui-prop>
                <ui-label slot="label">è°ƒè¯•æ—¥å¿—</ui-label>
                <ui-checkbox slot="content" v-model="settings.debugLog"></ui-checkbox>
            </ui-prop>
            <ui-prop>
                <ui-label slot="label">æœ€å¤§è¿æ¥æ•°</ui-label>
                <ui-num-input slot="content" v-model="settings.maxConnections" :min="1" :max="100" :step="1">
                </ui-num-input>
            </ui-prop>
        </section>

        <section class="server-info" v-if="serverRunning">
            <h3>è¿æ¥ä¿¡æ¯</h3>
            <div class="connection-details">
                <ui-prop>
                    <ui-label slot="label">MCP URL</ui-label>
                    <ui-input slot="content" :value="httpUrl" readonly>
                        <ui-button slot="suffix" @click="copyUrl">å¤åˆ¶</ui-button>
                    </ui-input>
                </ui-prop>
                <ui-prop>
                    <ui-label slot="label">ä¼ è¾“ç±»å‹</ui-label>
                    <ui-label slot="content">Streamable HTTP</ui-label>
                </ui-prop>
            </div>
        </section>

        <footer>
            <ui-button @click="saveSettings" :disabled="!settingsChanged">ä¿å­˜è®¾ç½®</ui-button>
        </footer>
        
        <!-- ç‰ˆæƒä¿¡æ¯åŒºåŸŸ -->
        <section class="copyright-info">
            <div class="copyright-content">
                <div class="copyright-text">
                    <div class="copyright-line">Â© 2025 æå¤§ä»™ (LiDaxian) - Cocos Creator MCP Server v1.5.4</div>
                    <div class="copyright-line">åŸºäº Streamable HTTP åè®® (MCP 2025-03-26)</div>
                </div>
                <div class="contact-info">
                    <div class="contact-item">
                        <span class="contact-label">ğŸ“§ è”ç³»é‚®ç®±:</span>
                        <span class="contact-value">a549623165@gmail.com</span>
                    </div>
                    <div class="contact-item">
                        <span class="contact-label">ğŸ’¬ å¾®ä¿¡:</span>
                        <span class="contact-value">GM_LiDaDa</span>
                    </div>
                    <div class="contact-item">
                        <span class="contact-label">ğŸ™ GitHub:</span>
                        <span class="contact-value">https://github.com/DaxianLee</span>
                    </div>
                </div>
            </div>
        </section>
    </div>
    
    <!-- å·¥å…·ç®¡ç†é€‰é¡¹å¡ -->
    <div class="tab-content" v-show="activeTab === 'tools'">
        <section class="tool-manager">
            <div class="tool-manager-header">
                <h3>å·¥å…·ç®¡ç†</h3>
            </div>
            
            <div class="tools-section">
                <div class="tools-section-header">
                    <div class="tools-section-title">
                        <h4>å¯ç”¨å·¥å…·</h4>
                        <div class="tools-stats">
                            {{ totalTools }} ä¸ªå·¥å…·
                            ({{ enabledTools }} å¯ç”¨ / {{ disabledTools }} ç¦ç”¨)
                        </div>
                    </div>
                    <div class="tools-section-controls">
                        <ui-button @click="selectAllTools" class="small">å…¨é€‰</ui-button>
                        <ui-button @click="deselectAllTools" class="small">å–æ¶ˆå…¨é€‰</ui-button>
                        <ui-button @click="saveChanges" class="primary">ä¿å­˜æ›´æ”¹</ui-button>
                    </div>
                </div>
                
                <div class="tools-container">
                    <div v-for="category in toolCategories" :key="category" class="tool-category">
                        <div class="category-header">
                            <h5>{{ getCategoryDisplayName(category) }}</h5>
                            <div class="category-controls">
                                <ui-button @click="toggleCategoryTools(category, true)" class="small">å…¨é€‰</ui-button>
                                <ui-button @click="toggleCategoryTools(category, false)" class="small">å–æ¶ˆå…¨é€‰</ui-button>
                            </div>
                        </div>
                        <div class="tool-items">
                            <div v-for="tool in getToolsByCategory(category)" :key="tool.name" class="tool-item">
                                <ui-checkbox 
                                    :value="tool.enabled"
                                    @change="(event) => updateToolStatus(category, tool.name, event.target.checked)"
                                ></ui-checkbox>
                                <div class="tool-info">
                                    <div class="tool-name">{{ tool.name }}</div>
                                    <div class="tool-description">{{ tool.description }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- å·¥å…·ç®¡ç†é€‰é¡¹å¡ç‰ˆæƒä¿¡æ¯ -->
        <section class="copyright-info">
            <div class="copyright-content">
                <div class="copyright-text">
                    <div class="copyright-line">ğŸ› ï¸ å·¥å…·ç³»ç»Ÿ - 50ä¸ªå¼ºåŠ›å·¥å…·ï¼Œ99%ç¼–è¾‘å™¨æ§åˆ¶</div>
                    <div class="copyright-line">ğŸ”— æŠ€æœ¯æ”¯æŒ: ğŸ“§ a549623165@gmail.com | ğŸ’¬ å¾®ä¿¡: GM_LiDaDa | ğŸ™ GitHub: DaxianLee</div>
                </div>
            </div>
        </section>
    </div>

    <!-- ä¸€é”®é…ç½®é€‰é¡¹å¡ -->
    <div class="tab-content" v-show="activeTab === 'config'">
        <section class="quick-config">
            <div class="config-header">
                <h3>ä¸€é”®é…ç½® MCP å®¢æˆ·ç«¯</h3>
                <p class="config-description">è‡ªåŠ¨å°†å½“å‰MCPæœåŠ¡å™¨é…ç½®åˆ°ä¸»æµAIç¼–è¾‘å™¨å’ŒCLIå·¥å…·ä¸­</p>
            </div>

            <section class="server-info-section">
                <h4>æœåŠ¡å™¨ä¿¡æ¯</h4>
                <ui-prop>
                    <ui-label slot="label">æœåŠ¡å™¨åç§°</ui-label>
                    <ui-input slot="content" v-model="configServerName" placeholder="cocos-creator"></ui-input>
                </ui-prop>
                <ui-prop>
                    <ui-label slot="label">æœåŠ¡å™¨åœ°å€</ui-label>
                    <ui-input slot="content" :value="configServerUrl" readonly></ui-input>
                </ui-prop>
                <ui-prop>
                    <ui-label slot="label">è¶…æ—¶æ—¶é—´(ms)</ui-label>
                    <ui-num-input slot="content" v-model="configTimeout" :min="5000" :max="60000" :step="1000"></ui-num-input>
                </ui-prop>
            </section>

            <section class="ide-config-section">
                <div class="section-header">
                    <h4>è‡ªåŠ¨é…ç½® (IDEç¼–è¾‘å™¨ + Codex CLI)</h4>
                    <div class="batch-actions">
                        <ui-button @click="addToAllIDE" class="primary" :disabled="!serverRunning">å…¨éƒ¨æ·»åŠ </ui-button>
                        <ui-button @click="removeFromAllIDE" class="danger">å…¨éƒ¨åˆ é™¤</ui-button>
                    </div>
                </div>
                <p class="section-note">ç‚¹å‡»æŒ‰é’®å°†è‡ªåŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆåŒ…æ‹¬Cursorã€Windsurfã€Traeã€Codex CLIï¼‰</p>

                <div class="client-list">
                    <div v-for="client in ideClients" :key="client.clientType" class="client-item">
                        <div class="client-info">
                            <div class="client-name">{{ client.clientName }}</div>
                            <div class="client-path">{{ client.configPath }}</div>
                            <div class="client-status" :class="client.exists ? 'exists' : 'not-exists'">
                                {{ client.exists ? 'âœ“ å·²é…ç½®' : 'âœ— æœªé…ç½®' }}
                            </div>
                        </div>
                        <div class="client-actions">
                            <ui-button @click="addToClient(client.clientType)" class="small" :disabled="client.exists">è‡ªåŠ¨é…ç½®</ui-button>
                            <ui-button @click="removeFromClient(client.clientType)" class="small danger" :disabled="!client.exists">åˆ é™¤</ui-button>
                            <ui-button @click="copyClientConfig(client.clientType)" class="small">å¤åˆ¶é…ç½®</ui-button>
                            <ui-button @click="openConfigFile(client.configPath)" class="small">æ‰“å¼€é…ç½®</ui-button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="cli-config-section">
                <div class="section-header">
                    <h4>æ‰‹åŠ¨é…ç½® (Claude CLI + Gemini CLI)</h4>
                    <ui-button @click="refreshCLICommands" class="small">åˆ·æ–°å‘½ä»¤</ui-button>
                </div>
                <p class="section-note">ä»¥ä¸‹CLIå·¥å…·éœ€è¦åœ¨ç»ˆç«¯ä¸­æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤é…ç½®</p>

                <div class="scope-selector" style="margin-bottom: 15px; display: flex; gap: 10px; align-items: center;">
                    <span style="color: #aaa;">é…ç½®èŒƒå›´:</span>
                    <ui-button
                        @click="cliScope = 'user'"
                        :class="cliScope === 'user' ? 'primary' : ''"
                        class="small">
                        ç”¨æˆ·çº§åˆ«
                    </ui-button>
                    <ui-button
                        @click="cliScope = 'project'"
                        :class="cliScope === 'project' ? 'primary' : ''"
                        class="small">
                        é¡¹ç›®çº§åˆ«
                    </ui-button>
                </div>

                <div class="cli-commands">
                    <div class="cli-item">
                        <div class="cli-name">Claude CLI</div>
                        <div class="cli-command-box">
                            <pre>{{ cliCommands.claude }}</pre>
                            <ui-button @click="copyCLICommand('claude')" class="small">å¤åˆ¶</ui-button>
                        </div>
                    </div>

                    <div class="cli-item">
                        <div class="cli-name">Gemini CLI</div>
                        <div class="cli-command-box">
                            <pre>{{ cliCommands.gemini }}</pre>
                            <ui-button @click="copyCLICommand('gemini')" class="small">å¤åˆ¶</ui-button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="config-log">
                <h4>æ“ä½œæ—¥å¿—</h4>
                <div class="log-container">
                    <div v-for="(log, index) in configLogs" :key="index" class="log-item" :class="log.type">
                        <span class="log-time">{{ log.time }}</span>
                        <span class="log-message">{{ log.message }}</span>
                    </div>
                    <div v-if="configLogs.length === 0" class="log-empty">æš‚æ— æ“ä½œè®°å½•</div>
                </div>
            </section>
        </section>

        <!-- ä¸€é”®é…ç½®é€‰é¡¹å¡ç‰ˆæƒä¿¡æ¯ -->
        <section class="copyright-info">
            <div class="copyright-content">
                <div class="copyright-text">
                    <div class="copyright-line">âš¡ ä¸€é”®é…ç½® - æ”¯æŒCursorã€Windsurfã€Traeç­‰ä¸»æµç¼–è¾‘å™¨</div>
                    <div class="copyright-line">ğŸ”— æŠ€æœ¯æ”¯æŒ: ğŸ“§ a549623165@gmail.com | ğŸ’¬ å¾®ä¿¡: GM_LiDaDa | ğŸ™ GitHub: DaxianLee</div>
                </div>
            </div>
        </section>
    </div>
</div>

 